More changes for File 3.

Stashed changes.

Changes in v2.0